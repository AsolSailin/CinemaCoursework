@page "/adding_movie"
@using CinemaCoursework.Data
@using CinemaCoursework.Services
@inject PagesList pageList
@inject DataBase dataBase

<PageTitle>Adding movie</PageTitle>

<style type="text/css">
    .lblOne {
        text-decoration: underline;
        width: 100px;
        white-space: nowrap;
        font-weight: 700;
        font-size: 23px;
    }

    .lblTwo {
        font-size: 23px;
    }

    .field {
        width: 85%;
        background: #9F4FF9;
        border-radius: 20px;
        font-size: 20px;
    }

    .button {
        background: #9F4FF9;
        border-radius: 15px;
        font-size: 23px;
    }
</style>

<div>
    <table width="100%">
        <tr>
            <td><label class="lblOne">ДАННЫЕ:</label></td>
        </tr>
        <tr>
            <td><label class="lblTwo">Название:</label></td>
            <td><input class="field" id="movie_name" type="text" @bind-value="@movie.Name"></td>
        </tr>
        <tr><td><label></label></td></tr>
        <tr>
            <td><label class="lblTwo">Жанр:</label></td>
            <td><input class="field" id="genre" type="text" @bind-value="@movie.Genre"></td>
        </tr>
        <tr><td><label></label></td></tr>
        <tr>
            <td><label class="lblTwo">Режиссер:</label></td>
            <td><input class="field" id="regisseur" type="text" @bind-value="@movie.Regisseur"></td>
        </tr>
        <tr><td><label></label></td></tr>
        <tr>
            <td><label class="lblTwo">В ролях:</label></td>
            <td><input class="field" id="roles" type="text" @bind-value="@movie.Roles"></td>
        </tr>
        <tr><td><label></label></td></tr>
        <tr>
            <td><label class="lblTwo">Страна:</label></td>
            <td><input class="field" id="country" type="text" @bind-value="@movie.Country"></td>
        </tr>
        <tr><td><label></label></td></tr>
        <tr>
            <td><label class="lblTwo">Продолжительность:</label></td>
            <td><input class="field" id="duration" type="text" @bind-value="@movie.Duration"></td>
        </tr>
        <tr><td><label></label></td></tr>
        <tr>
            <td><label class="lblTwo">Описание:</label></td>
            <td><textarea rows="10" class="field" id="description" type="text" @bind="@movie.Description" /></td>
        </tr>
        <tr><td><label></label></td></tr>
        <tr>
            <td><label class="lblTwo">Цена билета:</label></td>
            <td><input class="field" id="duration" type="text" @bind-value="@movie.Price"></td>
        </tr>
        <tr><td><label></label></td></tr>
        <tr>
            <td><button class="button" @onclick="Save">Сохранить</button><br /></td>
        </tr>
    </table>
</div>

@code {
    private Movie movie = new Movie();

    public void Save()
    {
        dataBase.CurrentMovie = new Movie()
            {
                Name = movie.Name,
                Genre = movie.Genre,
                Regisseur = movie.Regisseur,
                Roles = movie.Roles,
                Country = movie.Country,
                Duration = movie.Duration,
                Description = movie.Description,
                Price = movie.Price
            };

        dataBase.AddMovieToDataBase(dataBase.CurrentMovie);
    }
}